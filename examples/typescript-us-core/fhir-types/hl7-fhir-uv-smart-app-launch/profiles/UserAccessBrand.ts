// WARNING: This file is autogenerated by @atomic-ehr/codegen.
// GitHub: https://github.com/atomic-ehr/codegen
// Any manual changes made to this file may be overwritten.

import type { Coding } from "../../hl7-fhir-r4-core/Coding";
import type { ContactPoint } from "../../hl7-fhir-r4-core/ContactPoint";
import type { Extension } from "../../hl7-fhir-r4-core/Extension";
import type { Organization } from "../../hl7-fhir-r4-core/Organization";
import type { Reference } from "../../hl7-fhir-r4-core/Reference";

// CanonicalURL: http://hl7.org/fhir/smart-app-launch/StructureDefinition/user-access-brand
export interface UserAccessBrand extends Organization {
    name: string;
    telecom: ContactPoint[];
}

export type UserAccessBrand_BrandInput = {
    brandLogo?: url[];
    brandLogoLicenseType?: Coding[];
    brandLogoLicense?: url[];
    brandBundle?: url[];
}

export type UserAccessBrand_PortalInput = {
    portalName?: string;
    portalDescription?: markdown;
    portalUrl?: url;
    portalLogo?: url[];
    portalLogoLicenseType?: Coding[];
    portalLogoLicense?: url[];
    portalEndpoint?: Reference[];
}

import { extractComplexExtension } from "../../profile-helpers";

export class UserAccessBrandProfile {
    private resource: Organization

    constructor (resource: Organization) {
        this.resource = resource
    }

    toResource () : Organization {
        return this.resource
    }

    toProfile () : UserAccessBrand {
        return this.resource as UserAccessBrand
    }

    public setBrand (input: UserAccessBrand_BrandInput): this {
        const subExtensions: Extension[] = []
        if (input.brandLogo) {
            for (const item of input.brandLogo) {
                subExtensions.push({ url: "brandLogo", valueUrl: item })
            }
        }
        if (input.brandLogoLicenseType) {
            for (const item of input.brandLogoLicenseType) {
                subExtensions.push({ url: "brandLogoLicenseType", valueCoding: item })
            }
        }
        if (input.brandLogoLicense) {
            for (const item of input.brandLogoLicense) {
                subExtensions.push({ url: "brandLogoLicense", valueUrl: item })
            }
        }
        if (input.brandBundle) {
            for (const item of input.brandBundle) {
                subExtensions.push({ url: "brandBundle", valueUrl: item })
            }
        }
        const list = (this.resource.extension ??= [])
        list.push({ url: "http://hl7.org/fhir/StructureDefinition/organization-brand", extension: subExtensions })
        return this
    }

    public setPortal (input: UserAccessBrand_PortalInput): this {
        const subExtensions: Extension[] = []
        if (input.portalName !== undefined) {
            subExtensions.push({ url: "portalName", valueString: input.portalName })
        }
        if (input.portalDescription !== undefined) {
            subExtensions.push({ url: "portalDescription", valueMarkdown: input.portalDescription })
        }
        if (input.portalUrl !== undefined) {
            subExtensions.push({ url: "portalUrl", valueUrl: input.portalUrl })
        }
        if (input.portalLogo) {
            for (const item of input.portalLogo) {
                subExtensions.push({ url: "portalLogo", valueUrl: item })
            }
        }
        if (input.portalLogoLicenseType) {
            for (const item of input.portalLogoLicenseType) {
                subExtensions.push({ url: "portalLogoLicenseType", valueCoding: item })
            }
        }
        if (input.portalLogoLicense) {
            for (const item of input.portalLogoLicense) {
                subExtensions.push({ url: "portalLogoLicense", valueUrl: item })
            }
        }
        if (input.portalEndpoint) {
            for (const item of input.portalEndpoint) {
                subExtensions.push({ url: "portalEndpoint", valueReference: item })
            }
        }
        const list = (this.resource.extension ??= [])
        list.push({ url: "http://hl7.org/fhir/StructureDefinition/organization-portal", extension: subExtensions })
        return this
    }

    public resetBrand (): this {
        const list = this.resource.extension
        if (list) {
            const index = list.findIndex((e) => e.url === "http://hl7.org/fhir/StructureDefinition/organization-brand")
            if (index !== -1) {
                list.splice(index, 1)
            }
        }
        return this
    }

    public resetPortal (): this {
        const list = this.resource.extension
        if (list) {
            const index = list.findIndex((e) => e.url === "http://hl7.org/fhir/StructureDefinition/organization-portal")
            if (index !== -1) {
                list.splice(index, 1)
            }
        }
        return this
    }

    public getBrand(raw: true): Extension | undefined
    public getBrand(raw?: false): UserAccessBrand_BrandInput | undefined
    public getBrand (raw?: boolean): Extension | UserAccessBrand_BrandInput | undefined {
        const ext = this.resource.extension?.find(e => e.url === "http://hl7.org/fhir/StructureDefinition/organization-brand")
        if (!ext) return undefined
        if (raw) return ext
        const config = [{ name: "brandLogo", valueField: "valueUrl", isArray: true }, { name: "brandLogoLicenseType", valueField: "valueCoding", isArray: true }, { name: "brandLogoLicense", valueField: "valueUrl", isArray: true }, { name: "brandBundle", valueField: "valueUrl", isArray: true }]
        return extractComplexExtension(ext as unknown as { extension?: Array<{ url?: string; [key: string]: unknown }> }, config) as UserAccessBrand_BrandInput
    }

    public getPortal(raw: true): Extension | undefined
    public getPortal(raw?: false): UserAccessBrand_PortalInput | undefined
    public getPortal (raw?: boolean): Extension | UserAccessBrand_PortalInput | undefined {
        const ext = this.resource.extension?.find(e => e.url === "http://hl7.org/fhir/StructureDefinition/organization-portal")
        if (!ext) return undefined
        if (raw) return ext
        const config = [{ name: "portalName", valueField: "valueString", isArray: false }, { name: "portalDescription", valueField: "valueMarkdown", isArray: false }, { name: "portalUrl", valueField: "valueUrl", isArray: false }, { name: "portalLogo", valueField: "valueUrl", isArray: true }, { name: "portalLogoLicenseType", valueField: "valueCoding", isArray: true }, { name: "portalLogoLicense", valueField: "valueUrl", isArray: true }, { name: "portalEndpoint", valueField: "valueReference", isArray: true }]
        return extractComplexExtension(ext as unknown as { extension?: Array<{ url?: string; [key: string]: unknown }> }, config) as UserAccessBrand_PortalInput
    }

}

